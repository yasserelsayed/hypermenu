{"ast":null,"code":"var _jsxFileName = \"D:\\\\masterdegree\\\\projectHyperMenu\\\\react\\\\hyper_menu\\\\src\\\\page\\\\login.js\";\nimport React, { useState } from 'react';\nimport Header from './header';\nimport Footer from './footer';\nimport CustomLoader from '../custom_loader';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\n\nfunction emailIsValid(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n}\n\nexport default function Login(props) {\n  const [formState, setFormState] = useState({\n    email: \"\",\n    emailError: \"\",\n    password: \"\",\n    passwordError: \"\"\n  });\n  const [laodingStatus, setlaodingStatus] = useState(false);\n  const navigate = useNavigate();\n  const objErrors = {\n    email: \"Valid email is required.\",\n    password: \"The password field is required.\"\n  };\n  const [cookies, setCookie] = useCookies(['access_token']);\n  alert(JSON.stringify(cookies));\n\n  function submit() {\n    let hasError = false;\n\n    if (formState.email.length == 0 || !emailIsValid(formState.email.toLowerCase())) {\n      formState.emailError = objErrors.email;\n      hasError = true;\n    } else formState.emailError = \"\";\n\n    if (formState.password.length == 0) {\n      formState.passwordError = objErrors.password;\n      hasError = true;\n    } else formState.passwordError = \"\";\n\n    if (hasError) setFormState({ ...formState\n    });\n\n    if (!hasError) {\n      setlaodingStatus(true);\n      axios.post(`login`, formState).then(res => {\n        setlaodingStatus(false);\n        setCookie('access_token', \"Bearer \" + res.data.token);\n        axios.defaults.headers.common['Authorization'] = cookies.access_token;\n        console.log(res.data.token);\n        navigate(\"/dashboard\");\n      }).catch(error => {\n        setlaodingStatus(false);\n        let errors = error.response.data.errors;\n        if (errors.hasOwnProperty(\"email\")) formState.emailError = errors.email;else formState.emailError = \"\";\n        if (errors.hasOwnProperty(\"password\")) formState.passwordError = errors.password;else formState.passwordHasError = \"\";\n        setFormState({ ...formState\n        });\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(CustomLoader, {\n    show: laodingStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 1\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 1\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"section-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"disabledTextInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => {\n      setFormState({ ...formState,\n        \"email\": e.currentTarget.value\n      });\n    },\n    class: \"form-control\",\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }), formState.emailError.length > 0 && /*#__PURE__*/React.createElement(\"p\", {\n    class: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 64\n    }\n  }, formState.emailError)), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"disabledTextInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onChange: e => {\n      setFormState({ ...formState,\n        \"password\": e.currentTarget.value\n      });\n    },\n    class: \"form-control\",\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }), formState.passwordError.length > 0 && /*#__PURE__*/React.createElement(\"p\", {\n    class: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 68\n    }\n  }, formState.passwordError)), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"btn btn-primary\",\n    onClick: e => {\n      e.preventDefault();\n      submit();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 26\n    }\n  }, \"Login\"), \" \\xA0 \\xA0\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 26\n    }\n  }, \"Sign up\"))))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 1\n    }\n  }));\n}","map":{"version":3,"sources":["D:/masterdegree/projectHyperMenu/react/hyper_menu/src/page/login.js"],"names":["React","useState","Header","Footer","CustomLoader","Link","useNavigate","axios","useCookies","emailIsValid","email","test","Login","props","formState","setFormState","emailError","password","passwordError","laodingStatus","setlaodingStatus","navigate","objErrors","cookies","setCookie","alert","JSON","stringify","submit","hasError","length","toLowerCase","post","then","res","data","token","defaults","headers","common","access_token","console","log","catch","error","errors","response","hasOwnProperty","passwordHasError","e","currentTarget","value","preventDefault"],"mappings":"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","sourcesContent":["import React,{ useState } from 'react'\r\nimport Header from './header'\r\nimport Footer from './footer'\r\nimport CustomLoader from '../custom_loader'\r\nimport { Link,useNavigate } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { useCookies } from 'react-cookie'\r\n\r\n\r\nfunction emailIsValid (email) {\r\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n}\r\nexport default function Login(props){\r\n  const [formState, setFormState] = useState({email:\"\",emailError:\"\",password:\"\",passwordError:\"\"});\r\n  const [laodingStatus,setlaodingStatus] = useState(false)\r\n  const navigate  = useNavigate()\r\n  const objErrors = {\r\n  email:\"Valid email is required.\",\r\n  password:\"The password field is required.\"}\r\n  const [cookies, setCookie] = useCookies(['access_token'])\r\n  alert(JSON.stringify(cookies))\r\n  function submit(){\r\n  \r\n    let hasError = false\r\n     if(formState.email.length == 0 || !emailIsValid(formState.email.toLowerCase())){ \r\n       formState.emailError=objErrors.email;\r\n       hasError = true;\r\n     }else formState.emailError = \"\" \r\n     if(formState.password.length == 0){ formState.passwordError=objErrors.password;\r\n      hasError = true;\r\n     }else formState.passwordError = \"\" \r\n     if(hasError)\r\n     setFormState({...formState})\r\n     if(!hasError){\r\n       setlaodingStatus(true)\r\n      axios.post(`login`,formState)\r\n      .then(res => {\r\n       setlaodingStatus(false)\r\n       setCookie('access_token', \"Bearer \"+res.data.token)\r\n        axios.defaults.headers.common['Authorization'] = cookies.access_token;\r\n        console.log(res.data.token)\r\n        navigate(\"/dashboard\")\r\n      }).catch(error => {\r\n        setlaodingStatus(false)\r\n       let errors =  error.response.data.errors;\r\n       if(errors.hasOwnProperty(\"email\")) formState.emailError=errors.email \r\n       else formState.emailError = \"\" \r\n       if(errors.hasOwnProperty(\"password\"))  formState.passwordError=errors.password\r\n       else formState.passwordHasError = \"\"\r\n       setFormState({...formState})\r\n   })\r\n  }\r\n  }\r\n\r\n  return(  <div>\r\n\r\n<CustomLoader show={laodingStatus} />\r\n<Header/>\r\n<div class=\"section-container\">\r\n    <div class=\"container\">\r\n            <div class=\"row\">\r\n                <div class=\"col-xs-12\">\r\n\r\n                    <form>\r\n                        <fieldset>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"disabledTextInput\">Email</label>\r\n                            <input type=\"text\" onChange={e=>{setFormState({...formState,\"email\":e.currentTarget.value})}} class=\"form-control\" placeholder=\"Email\" />\r\n                            {formState.emailError.length > 0 &&<p class=\"text-danger\">{formState.emailError}</p>  } \r\n                          </div>\r\n                          <div class=\"form-group\">\r\n                            <label for=\"disabledTextInput\">Password</label>\r\n                            <input type=\"password\" onChange={e=>{setFormState({...formState,\"password\":e.currentTarget.value})}} class=\"form-control\" placeholder=\"Password\" />\r\n                            {formState.passwordError.length > 0  &&<p class=\"text-danger\">{formState.passwordError}</p>  } \r\n                          </div>\r\n                         <a className=\"btn btn-primary\" onClick={e=>{\r\n                            e.preventDefault();\r\n                             submit();\r\n                          }\r\n                          } >Login</a> &nbsp; &nbsp;\r\n                         <Link  to=\"/register\">Sign up</Link>\r\n                        </fieldset>\r\n                      </form>\r\n\r\n                </div>\r\n            </div>\r\n    </div>\r\n</div>\r\n<Footer/>\r\n    </div>\r\n)\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}