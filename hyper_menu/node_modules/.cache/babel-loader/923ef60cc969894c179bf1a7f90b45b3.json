{"ast":null,"code":"import _objectSpread from\"D:\\\\masterdegree\\\\projectHyperMenu\\\\react\\\\hyper_menu\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\masterdegree\\\\projectHyperMenu\\\\react\\\\hyper_menu\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Header from'./header';import Footer from'./footer';import CustomLoader from'../custom_loader';import{Link,useNavigate}from\"react-router-dom\";import axios from'axios';import{useCookies}from'react-cookie';function emailIsValid(email){return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);}export default function Login(props){var _useState=useState({email:\"\",emailError:\"\",password:\"\",passwordError:\"\"}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),laodingStatus=_useState4[0],setlaodingStatus=_useState4[1];var navigate=useNavigate();var objErrors={email:\"Valid email is required.\",password:\"The password field is required.\"};var _useCookies=useCookies(['access_token']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];function submit(){var hasError=false;if(formState.email.length==0||!emailIsValid(formState.email.toLowerCase())){formState.emailError=objErrors.email;hasError=true;}else formState.emailError=\"\";if(formState.password.length==0){formState.passwordError=objErrors.password;hasError=true;}else formState.passwordError=\"\";if(hasError)setFormState(_objectSpread({},formState));if(!hasError){setlaodingStatus(true);axios.post(\"login\",formState).then(function(res){setlaodingStatus(false);setCookie('access_token',\"Bearer \"+res.data.token);axios.defaults.headers.common['Authorization']=cookies.access_token;console.log(res.data.token);navigate(\"/dashboard\");}).catch(function(error){setlaodingStatus(false);var errors=error.response.data.errors;if(errors.hasOwnProperty(\"email\"))formState.emailError=errors.email;else formState.emailError=\"\";if(errors.hasOwnProperty(\"password\"))formState.passwordError=errors.password;else formState.passwordHasError=\"\";setFormState(_objectSpread({},formState));});}}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CustomLoader,{show:laodingStatus}),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{class:\"section-container\"},/*#__PURE__*/React.createElement(\"div\",{class:\"container\"},/*#__PURE__*/React.createElement(\"div\",{class:\"row\"},/*#__PURE__*/React.createElement(\"div\",{class:\"col-xs-12\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"fieldset\",null,/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"disabledTextInput\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:function onChange(e){setFormState(_objectSpread(_objectSpread({},formState),{},{\"email\":e.currentTarget.value}));},class:\"form-control\",placeholder:\"Email\"}),formState.emailError.length>0&&/*#__PURE__*/React.createElement(\"p\",{class:\"text-danger\"},formState.emailError)),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"disabledTextInput\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:function onChange(e){setFormState(_objectSpread(_objectSpread({},formState),{},{\"password\":e.currentTarget.value}));},class:\"form-control\",placeholder:\"Password\"}),formState.passwordError.length>0&&/*#__PURE__*/React.createElement(\"p\",{class:\"text-danger\"},formState.passwordError)),/*#__PURE__*/React.createElement(\"a\",{className:\"btn btn-primary\",onClick:function onClick(e){e.preventDefault();submit();}},\"Login\"),\" \\xA0 \\xA0\",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"Sign up\"))))))),/*#__PURE__*/React.createElement(Footer,null));}","map":{"version":3,"sources":["D:/masterdegree/projectHyperMenu/react/hyper_menu/src/page/login.js"],"names":["React","useState","Header","Footer","CustomLoader","Link","useNavigate","axios","useCookies","emailIsValid","email","test","Login","props","emailError","password","passwordError","formState","setFormState","laodingStatus","setlaodingStatus","navigate","objErrors","cookies","setCookie","submit","hasError","length","toLowerCase","post","then","res","data","token","defaults","headers","common","access_token","console","log","catch","error","errors","response","hasOwnProperty","passwordHasError","e","currentTarget","value","preventDefault"],"mappings":"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","sourcesContent":["import React,{ useState } from 'react'\r\nimport Header from './header'\r\nimport Footer from './footer'\r\nimport CustomLoader from '../custom_loader'\r\nimport { Link,useNavigate } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { useCookies } from 'react-cookie'\r\n\r\n\r\nfunction emailIsValid (email) {\r\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n}\r\nexport default function Login(props){\r\n  const [formState, setFormState] = useState({email:\"\",emailError:\"\",password:\"\",passwordError:\"\"});\r\n  const [laodingStatus,setlaodingStatus] = useState(false)\r\n  const navigate  = useNavigate()\r\n  const objErrors = {\r\n  email:\"Valid email is required.\",\r\n  password:\"The password field is required.\"}\r\n  const [cookies, setCookie] = useCookies(['access_token'])\r\n  function submit(){\r\n  \r\n    let hasError = false\r\n     if(formState.email.length == 0 || !emailIsValid(formState.email.toLowerCase())){ \r\n       formState.emailError=objErrors.email;\r\n       hasError = true;\r\n     }else formState.emailError = \"\" \r\n     if(formState.password.length == 0){ formState.passwordError=objErrors.password;\r\n      hasError = true;\r\n     }else formState.passwordError = \"\" \r\n     if(hasError)\r\n     setFormState({...formState})\r\n     if(!hasError){\r\n       setlaodingStatus(true)\r\n      axios.post(`login`,formState)\r\n      .then(res => {\r\n       setlaodingStatus(false)\r\n       setCookie('access_token', \"Bearer \"+res.data.token)\r\n        axios.defaults.headers.common['Authorization'] = cookies.access_token;\r\n        console.log(res.data.token)\r\n        navigate(\"/dashboard\")\r\n      }).catch(error => {\r\n        setlaodingStatus(false)\r\n       let errors =  error.response.data.errors;\r\n       if(errors.hasOwnProperty(\"email\")) formState.emailError=errors.email \r\n       else formState.emailError = \"\" \r\n       if(errors.hasOwnProperty(\"password\"))  formState.passwordError=errors.password\r\n       else formState.passwordHasError = \"\"\r\n       setFormState({...formState})\r\n   })\r\n  }\r\n  }\r\n\r\n  return(  <div>\r\n\r\n<CustomLoader show={laodingStatus} />\r\n<Header/>\r\n<div class=\"section-container\">\r\n    <div class=\"container\">\r\n            <div class=\"row\">\r\n                <div class=\"col-xs-12\">\r\n\r\n                    <form>\r\n                        <fieldset>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"disabledTextInput\">Email</label>\r\n                            <input type=\"text\" onChange={e=>{setFormState({...formState,\"email\":e.currentTarget.value})}} class=\"form-control\" placeholder=\"Email\" />\r\n                            {formState.emailError.length > 0 &&<p class=\"text-danger\">{formState.emailError}</p>  } \r\n                          </div>\r\n                          <div class=\"form-group\">\r\n                            <label for=\"disabledTextInput\">Password</label>\r\n                            <input type=\"password\" onChange={e=>{setFormState({...formState,\"password\":e.currentTarget.value})}} class=\"form-control\" placeholder=\"Password\" />\r\n                            {formState.passwordError.length > 0  &&<p class=\"text-danger\">{formState.passwordError}</p>  } \r\n                          </div>\r\n                         <a className=\"btn btn-primary\" onClick={e=>{\r\n                            e.preventDefault();\r\n                             submit();\r\n                          }\r\n                          } >Login</a> &nbsp; &nbsp;\r\n                         <Link  to=\"/register\">Sign up</Link>\r\n                        </fieldset>\r\n                      </form>\r\n\r\n                </div>\r\n            </div>\r\n    </div>\r\n</div>\r\n<Footer/>\r\n    </div>\r\n)\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}