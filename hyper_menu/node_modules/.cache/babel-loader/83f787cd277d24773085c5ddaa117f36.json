{"ast":null,"code":"import _slicedToArray from\"D:\\\\masterdegree\\\\projectHyperMenu\\\\react\\\\hyper_menu\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from\"react-router-dom\";import axios from'axios';import{actions,nodeTypes}from'../reducers/studio_reducer';import CustomLoader from'../custom_loader';import Spalsh from'../splash';function Preview(props){var nodes=[];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),laodingStatus=_useState2[0],setlaodingStatus=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pagesList=_useState4[0],setPagesList=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),menu=_useState6[0],setMenu=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),activePageIndex=_useState8[0],setActivePageIndex=_useState8[1];var _useParams=useParams(),menuId=_useParams.menuId;var styleWrapper={header:{background:'red'}};function getMenuPages(){setlaodingStatus(true);axios.get('/page/show?menu_id='+menuId).then(function(res){setlaodingStatus(false);setPagesList(res.data);}).catch(function(error){setlaodingStatus(false);alert(error.message);});}function getMenuTemplate(){setlaodingStatus(true);axios.get('/menu/'+menuId).then(function(res){setMenu(res.data);}).catch(function(error){alert(error.message);});}useEffect(function(){getMenuPages();getMenuTemplate();},[]);if(pagesList[activePageIndex])nodes=JSON.parse(pagesList[activePageIndex].html_sections);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CustomLoader,{show:laodingStatus}),menu&&/*#__PURE__*/React.createElement(Spalsh,{selectedMenu:menu}),/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"nav\",{class:\"navbar  navbar-fixed-top navbar-default\"},/*#__PURE__*/React.createElement(\"div\",{class:\"container\"},/*#__PURE__*/React.createElement(\"div\",{class:\"navbar-header\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"navbar-toggle uarr collapsed\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbar-collapse-uarr\"},/*#__PURE__*/React.createElement(\"span\",{class:\"sr-only\"},\"Toggle navigation\"),/*#__PURE__*/React.createElement(\"span\",{class:\"icon-bar\"}),/*#__PURE__*/React.createElement(\"span\",{class:\"icon-bar\"}),/*#__PURE__*/React.createElement(\"span\",{class:\"icon-bar\"}))),/*#__PURE__*/React.createElement(\"div\",{class:\"collapse navbar-collapse\",id:\"navbar-collapse-uarr\"},/*#__PURE__*/React.createElement(\"ul\",{class:\"nav navbar-nav navbar-left\"},pagesList&&pagesList.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",null,\" \",/*#__PURE__*/React.createElement(\"a\",{href:\"#\",onClick:function onClick(e){e.preventDefault();setActivePageIndex(index);}},item.name));})))))),/*#__PURE__*/React.createElement(\"div\",{id:\"menuPage\",className:menu.template_class},/*#__PURE__*/React.createElement(\"ul\",null,nodes&&nodes.map(function(item){if(item.type==nodeTypes.header)return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{class:\"headerSection\",style:{background:item.color}},/*#__PURE__*/React.createElement(\"h1\",null,item.title),/*#__PURE__*/React.createElement(\"h6\",null,item.description)));else if(item.type==nodeTypes.image)return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{class:\"imageSection\"},item.src&&/*#__PURE__*/React.createElement(\"div\",{class:\"imageSection\",style:{backgroundImage:\"url(\".concat(item.src,\")\")}},/*#__PURE__*/React.createElement(\"h1\",null,item.title)),!item.src&&/*#__PURE__*/React.createElement(\"div\",{class:\"imageSection\",style:{backgroundImage:\"url(\\\"../../../assets/images/imageuploader.jpg\\\")\"}},/*#__PURE__*/React.createElement(\"h1\",null,item.title))));else if(item.type==nodeTypes.items)return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\" \",item&&item.title),/*#__PURE__*/React.createElement(\"div\",{class:\"itemSection\"},/*#__PURE__*/React.createElement(\"ul\",null,item.priceList&&item.priceList.map(function(r){return/*#__PURE__*/React.createElement(\"li\",null,\" \",/*#__PURE__*/React.createElement(\"p\",null,r.content),\" \",/*#__PURE__*/React.createElement(\"span\",null,r.price,\" \\u20BD\"),\" \");}))));else if(item.type==nodeTypes.footer)return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{class:\"footerSection\"},/*#__PURE__*/React.createElement(\"ul\",null,item.itemsList&&item.itemsList.map(function(r){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{class:\"fa \"+r.icon,\"aria-hidden\":\"true\"}),\" \",/*#__PURE__*/React.createElement(\"h6\",null,r.content));}))));}))));}export default Preview;","map":{"version":3,"sources":["D:/masterdegree/projectHyperMenu/react/hyper_menu/src/page/preview.js"],"names":["React","useState","useEffect","useParams","axios","actions","nodeTypes","CustomLoader","Spalsh","Preview","props","nodes","laodingStatus","setlaodingStatus","pagesList","setPagesList","menu","setMenu","activePageIndex","setActivePageIndex","menuId","styleWrapper","header","background","getMenuPages","get","then","res","data","catch","error","alert","message","getMenuTemplate","JSON","parse","html_sections","map","item","index","e","preventDefault","name","template_class","type","color","title","description","image","src","backgroundImage","items","priceList","r","content","price","footer","itemsList","icon"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { actions, nodeTypes } from '../reducers/studio_reducer'\r\nimport CustomLoader from '../custom_loader'\r\nimport Spalsh from '../splash'\r\n\r\nfunction Preview(props) {\r\n  var nodes = []\r\n  const [laodingStatus, setlaodingStatus] = useState(false)\r\n  const [pagesList, setPagesList] = useState([])\r\n  const [menu, setMenu] = useState({})\r\n  const [activePageIndex, setActivePageIndex] = useState(0)\r\n  const { menuId } = useParams()\r\n\r\n\r\n  const styleWrapper = {\r\n    header :{\r\n      background : 'red'\r\n    }\r\n  }\r\n\r\n  function getMenuPages() {\r\n    setlaodingStatus(true)\r\n    axios.get('/page/show?menu_id=' + menuId)\r\n      .then(res => {\r\n        setlaodingStatus(false)\r\n        setPagesList(res.data)\r\n      }).catch(error => {\r\n        setlaodingStatus(false)\r\n        alert(error.message)\r\n      })\r\n  }\r\n\r\n  function getMenuTemplate() {\r\n    setlaodingStatus(true)\r\n    axios.get('/menu/'+menuId)\r\n      .then(res => {\r\n        setMenu(res.data)\r\n      }).catch(error => {\r\n        alert(error.message)\r\n      })\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    getMenuPages();\r\n    getMenuTemplate();\r\n  }, [])\r\n\r\n  if (pagesList[activePageIndex])\r\n    nodes = JSON.parse(pagesList[activePageIndex].html_sections)\r\n  return (\r\n    <div>\r\n      <CustomLoader show={laodingStatus} />\r\n      { menu && <Spalsh selectedMenu={menu}/> }\r\n      <header>\r\n  <nav class=\"navbar  navbar-fixed-top navbar-default\">\r\n    <div class=\"container\">\r\n      <div class=\"navbar-header\">\r\n        <button type=\"button\" class=\"navbar-toggle uarr collapsed\" data-toggle=\"collapse\" data-target=\"#navbar-collapse-uarr\">\r\n          <span class=\"sr-only\">Toggle navigation</span>\r\n          <span class=\"icon-bar\"></span>\r\n          <span class=\"icon-bar\"></span>\r\n          <span class=\"icon-bar\"></span>\r\n        </button>\r\n      </div>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbar-collapse-uarr\">\r\n        <ul class=\"nav navbar-nav navbar-left\">\r\n          {pagesList && pagesList.map((item,index)=>{\r\n                 return  <li> <a href='#' onClick={(e)=>{\r\n                   e.preventDefault();\r\n                    setActivePageIndex(index)\r\n                 }}>{item.name}</a></li>\r\n          })}\r\n       \r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</header>\r\n      <div id=\"menuPage\" className={menu.template_class} >\r\n        <ul>\r\n          {nodes && nodes.map((item) => {\r\n            if (item.type == nodeTypes.header)\r\n              return (<li>\r\n                <div class=\"headerSection\" style={{background:item.color}}>\r\n                 <h1>{item.title}</h1>\r\n                 <h6>{item.description}</h6>\r\n                </div>\r\n              </li>)\r\n            else if (item.type == nodeTypes.image)\r\n              return (<li>\r\n                <div class=\"imageSection\">\r\n                {item.src && (<div class=\"imageSection\" style={{backgroundImage:`url(${item.src})`}}>\r\n              <h1>{item.title}</h1>\r\n            </div>)} \r\n            {!item.src && (<div class=\"imageSection\" style={{backgroundImage:`url(\"../../../assets/images/imageuploader.jpg\")`}}>\r\n              <h1>{item.title}</h1>\r\n            </div>)} \r\n                </div>\r\n              </li>)\r\n               else if(item.type == nodeTypes.items)\r\n               return  ( <li>\r\n                          <h2> {item && item.title}</h2>\r\n                                   <div class=\"itemSection\">\r\n                                     <ul>\r\n                                        {item.priceList && item.priceList.map((r)=>{\r\n                                          return        <li> <p>{r.content}</p> <span>{r.price} ₽</span> </li> \r\n                                        })}\r\n                                       </ul> \r\n                                   </div>\r\n                            </li>)\r\n            else if (item.type == nodeTypes.footer)\r\n              return (\r\n                <li>\r\n                  <div class=\"footerSection\">\r\n                    <ul>\r\n                    {item.itemsList && item.itemsList.map((r)=>{\r\n                    return  <li><i class={\"fa \"+ r.icon} aria-hidden=\"true\"></i> <h6>{r.content}</h6></li>\r\n                    })}\r\n                    </ul>\r\n                  </div>\r\n                </li>)\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Preview;\r\n"]},"metadata":{},"sourceType":"module"}